<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>InterviewAI ‚Äî Live Session</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .phase-banner {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(37, 99, 235, 0.12);
      border: 1px solid rgba(37, 99, 235, 0.25);
      border-radius: var(--radius-sm);
      padding: 10px 16px;
      font-size: 0.85rem;
      color: var(--blue-300);
      margin-bottom: 4px;
    }

    .phase-banner .phase-icon { font-size: 1rem; }

    .q-progress {
      display: flex;
      gap: 6px;
      margin-top: 8px;
    }

    .q-dot {
      height: 4px;
      flex: 1;
      border-radius: 2px;
      background: rgba(255,255,255,0.1);
      transition: background 0.4s;
    }

    .q-dot.done { background: var(--success); }
    .q-dot.current { background: var(--blue-400); }

    .recording-badge {
      display: none;
      align-items: center;
      gap: 6px;
      background: rgba(239,68,68,0.15);
      border: 1px solid rgba(239,68,68,0.3);
      color: #fca5a5;
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 4px 12px;
      border-radius: 100px;
    }

    .recording-badge.show { display: flex; }
    .recording-badge .dot {
      width: 6px; height: 6px;
      background: var(--danger);
      border-radius: 50%;
      animation: pulse 1s infinite;
    }

    .submit-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(10,22,40,0.9);
      backdrop-filter: blur(12px);
      z-index: 100;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      gap: 24px;
    }

    .submit-overlay.show { display: flex; }

    .submit-spinner {
      width: 60px; height: 60px;
      border: 3px solid rgba(255,255,255,0.1);
      border-top-color: var(--blue-400);
      border-radius: 50%;
      animation: spin 0.9s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .submit-overlay h2 {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 700;
    }

    .submit-overlay p { color: var(--gray-400); font-size: 0.9rem; }
  </style>
</head>
<body>
  <!-- Submit / Analyzing overlay -->
  <div class="submit-overlay" id="submit-overlay">
    <div class="submit-spinner"></div>
    <h2>Analyzing Your Interview‚Ä¶</h2>
    <p>Processing speech, facial expressions, and answer quality</p>
  </div>

  <div class="container">
    <nav class="nav">
      <a class="nav-logo" href="index.html">Interview<span>AI</span></a>
      <div style="display:flex;align-items:center;gap:12px;">
        <div class="recording-badge" id="recording-badge">
          <div class="dot"></div>
          Recording
        </div>
        <span class="nav-badge" id="session-label">Session Active</span>
      </div>
    </nav>

    <div class="interview-layout">
      <!-- Main area -->
      <div class="interview-main">

        <!-- Phase banner -->
        <div class="phase-banner" id="phase-banner">
          <span class="phase-icon">üëÄ</span>
          <span id="phase-text">Read the question carefully, then click "Start Answer" when ready.</span>
        </div>

        <!-- Webcam -->
        <div class="webcam-wrap">
          <video id="webcam-video" autoplay muted playsinline></video>
          <div class="webcam-overlay" id="cam-overlay"></div>
          <div class="webcam-status">
            <div class="dot live" id="cam-dot"></div>
            <span id="cam-label">LIVE</span>
          </div>
          <!-- No cam fallback -->
          <div class="webcam-no-cam" id="no-cam" style="display:none;">
            <div class="icon">üì∑</div>
            <div>Camera not available</div>
            <div style="font-size:0.75rem;color:var(--gray-600);">Interview will continue without video</div>
          </div>
        </div>

        <!-- Q progress -->
        <div class="q-progress" id="q-progress"></div>

        <!-- Question card -->
        <div class="question-card" id="question-card">
          <div class="question-meta">
            <span class="question-num" id="q-num">Question 1 of 5</span>
            <span class="question-category" id="q-cat">Behavioral</span>
          </div>
          <div class="question-text" id="q-text">Loading your personalized question‚Ä¶</div>
        </div>

        <!-- Transcript -->
        <div class="sidebar-card">
          <h3>Live Transcript</h3>
          <div class="transcript-box" id="transcript-box">
            Your spoken answer will appear here once you start recording‚Ä¶
          </div>
        </div>

        <!-- Controls -->
        <div class="controls-bar">
          <button class="btn btn-primary" id="btn-start" onclick="startAnswer()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4" fill="currentColor"/></svg>
            Start Answer
          </button>
          <button class="btn btn-danger" id="btn-stop" onclick="stopAnswer()" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="6" y="6" width="12" height="12" rx="1"/></svg>
            Stop
          </button>
          <button class="btn btn-secondary" id="btn-next" onclick="nextQuestion()" disabled>
            Next Question ‚Üí
          </button>
          <button class="btn btn-success" id="btn-submit" onclick="submitInterview()" disabled style="margin-left:auto;">
            Submit Interview ‚úì
          </button>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Timer -->
        <div class="sidebar-card">
          <h3>Answer Timer</h3>
          <div class="timer-display" id="timer-display">2:00</div>
          <div class="timer-label" id="timer-label">Press Start Answer to begin</div>
        </div>

        <!-- Mic indicator -->
        <div class="sidebar-card">
          <h3>Microphone</h3>
          <div class="mic-indicator">
            <div class="mic-icon-wrap" id="mic-icon">üé§</div>
            <div class="mic-info">
              <div class="mic-label" id="mic-label">Ready</div>
              <div class="mic-sublabel" id="mic-sub">Click "Start Answer" to record</div>
            </div>
          </div>
          <div class="waveform" id="waveform" style="margin-top:16px;">
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
          </div>
        </div>

        <!-- Tips -->
        <div class="sidebar-card">
          <h3>Tips</h3>
          <div style="display:flex;flex-direction:column;gap:10px;font-size:0.82rem;color:var(--gray-400);line-height:1.5;">
            <div>üëÅÔ∏è Maintain eye contact with the camera</div>
            <div>üó£Ô∏è Speak clearly and at a steady pace</div>
            <div>üìê Use the STAR method for behavioral questions</div>
            <div>‚è±Ô∏è Aim for 90‚Äì120 second answers</div>
          </div>
        </div>

        <!-- Session progress -->
        <div class="sidebar-card" style="background: linear-gradient(135deg,rgba(37,99,235,0.15),rgba(0,212,255,0.05)); border-color: rgba(37,99,235,0.25);">
          <h3>Session Progress</h3>
          <div style="font-family:var(--font-display);font-size:2.2rem;font-weight:800;letter-spacing:-0.03em;color:var(--white);" id="progress-big">0%</div>
          <div style="height:6px;background:rgba(255,255,255,0.08);border-radius:3px;margin-top:12px;overflow:hidden;">
            <div id="progress-bar" style="height:100%;border-radius:3px;background:var(--blue-400);width:0%;transition:width 0.5s;"></div>
          </div>
          <div style="font-size:0.75rem;color:var(--gray-400);margin-top:8px;" id="progress-label">0 of 5 answered</div>
        </div>
      </div>
    </div>
  </div>

  <script src="scripts.js"></script>
</body>
</html>